nie.util.share_traceCome=nie.util.share_traceCome||!1,nie.util.share_css=nie.util.share_css||!1,function(b){nie.util.share=nie.util.share||function(){var t="javascript:;",s=function(d,c){return"undefined"!=typeof d?d:c;},r=function(c){b(new Image()).bind("readystatechange",function(){"complete"==this.readyState;}).bind("abort",function(){}).attr("src",c);},q=function(g,f,j,i){var h=null!=a.args[g]?a.args[g]:j;return""==h?h:("url"==g&&(h=m(h,f)),encodeURIComponent(h+("undefined"!=typeof i?i:"")));},p=function(e){var d,f=[];for(d in e){f.push(d+"="+e[d]);}
    return f;},o=function(d){var c=["product="+a.args.product,"id="+d,"type="+a.args.traceType];r("http://click.ku.163.com/share.v2.gif?"+c.join("&"));},n=function(d){var c=document.createElement("div");return c.innerHTML='<a href="'+d.replace(/"/g,"%22")+'"/>',c.firstChild;},m=function(i,h){var w,v,u,k,j=i.match(a.args.urlReg);return j?i.replace(j[0],j[1]+[h,a.args.product,a.args.traceType].join(",")):(w=n(i),v=w.search+(""==w.search?"?":"&")+"nieShare="+[h,a.args.product,a.args.traceType].join(","),u=/^\//.test(w.pathname)?w.pathname:"/"+w.pathname,k=80==w.port?w.hostname:w.host,w.protocol+"//"+k+u+v+w.hash);},l=function(A){var z,y,x,w,v,u,k,g,f,e;if(a.data[A]){z=a.data[A],y=q("url",A,location.href),x=q("title",A,document.title),w=q("img",A,""),v=q("content",A,document.title),u=function(){var c=[650,500];return 22==A?c=[460,380]:"",23==A?c=[573,600]:"",c;}(),k=p({width:u[0],height:u[1],top:(screen.height-u[1])/4,left:(screen.width-u[0])/2,toolbar:"no",menubar:"no",scrollbars:"no",resizable:"yes",location:"no",status:"no"});for(g in z.paramName){switch(f="",parseInt(g)){case 1:f=y;break;case 2:f=5==A?x+y:x;break;case 3:f=w;break;case 4:f=v;break;case 5:f=encodeURIComponent(nie.util.siteName());}
    z.params[z.paramName[g]]=f;}
    e="http://"+z.file+"?"+p(z.params).join("&"),window.open(e,"_blank",k.join(",")),o(A);}},a={data:{},args:{panelID:"NIE-share-panel",fat:"#NIE-share",product:nie.config.site,imgs:null,txt:null,type:1,traceType:null,imgSize:[100,100],defShow:[23,22,1,2,3],defShow2:[23,22,1,2,3,8,4],moreShow:[23,22,5,1,2,3,4,6,7,8,9,10,11,13],searchTips:"\u8f93\u5165\u7f51\u7ad9\u540d\u6216\u62fc\u97f3\u7f29\u5199",sideBar_top:100,title:null,url:null,img:null,content:null,urlReg:new RegExp("([&?]nieShare=)(\\d+),([^,]+),(\\d+)")},addBtn:function(E,D,C,B,A,z){var y,x,w,v,k,j,c,H,G="",F="";switch(E=parseInt(E),y="\u5206\u4eab\u5230",x="",w="",v=0,k=16,s(z,a.args.type)){case 1:v=-(D-16+6*(E+1)+16*(E+1));break;case 2:v=32* -E,22==E?v=-160:"",23==E?v=-192:"",k=32;break;case 3:v=-(D-16+6*(E+1)+16*(E+1));}
    return j="background-position:"+C+"px "+v+"px",1==A?(G=a.data[E].name,F=y+G,w=j):0==A?(F=y+a.data[E].name,x="<img width="+k+" height="+k+" src='http://res.nie.netease.com/comm/blank.gif' style='"+j+"'>"):(G=A,w=j),c={index:E,"class":6==a.args.type?"NIE-share":"",style:w,href:t,title:F,target:"_self"},""==x?c.text=G:c.html=x,H=b("<a>",c).appendTo(B),function(){var d=E;H.click(function(){l(d);});}(),H;},addPanel:function(){var e,g,f=b("<div>",{id:a.args.panelID,html:"<h3>\u5206\u4eab\u5230...</h3><input type=text value='"+a.args.searchTips+"'/><div></div>"}).hide().appendTo(b(document.body));b("<button>").click(function(){f.hide();}).hover(function(){b(this).addClass("hover");},function(){b(this).removeClass("hover");}).appendTo(f),e=f.find("div");for(g in a.data){a.addBtn(g,12,5,e,!0,1);}
    f.find("input").click(function(){var d=b(this),h=d.val();h==a.args.searchTips&&d.val("");}).keyup(function(){var d=b(this).val().toLowerCase();e.find("a").each(function(){var c=b(this),h=c.attr("index");-1!=a.data[h].name.toLowerCase().indexOf(d)||-1!=a.data[h].searchTxt.toLowerCase().indexOf(d)||-1!=a.data[h].searchTxt.replace(/[a-z]/g,"").toLowerCase().indexOf(d)?c.show():c.hide();});});},showPanel:function(){var f,i="#"+a.args.panelID,h=b(i),g=b(window);0==h.length&&a.addPanel(),h=b(i),f=g.scrollTop()+(g.height()-h.height())/2,h.css({top:0>f?0:f,left:(g.width()-h.width())/2}).show().find("a").show();},render:function(){var aa,Z,Y,X,W,V,U,T,S,R,Q,P,O,M,K,I,H,G,F,E,D,k,h,N,L,J=a.args.type;null==a.args.traceType&&(a.args.traceType=J),1==J||2==J?(aa=b(a.args.fat),aa.length>0&&(Z=b("<span>",{"class":"NIE-share NIE-share"+J,html:"<span class='NIE-share-txt'>\u5206\u4eab\u5230:</span>"}).appendTo(aa),Y=b("<span>",{"class":"NIE-share-iconBtn"}).appendTo(Z),b.browser.webkit&&Y.css("fontSize",2==J?"41px":"20px"),b.each(a.args.defShow,function(){a.addBtn(this,16,0,Y,!1);}),W=!0,V=b("<span>",{html:"<em>\u66f4\u591a</em>","class":"NIE-share-more"}).mouseenter(function(){clearTimeout(X),W=!0;var c=b(window),u=b(this).children("span"),j=u.outerHeight(),f=u.outerWidth(),e=Z.offset();u.css({top:c.scrollTop()+c.height()<e.top+j+20?-j-12:4,left:c.scrollLeft()+c.width()<e.left+Z.width()+f?-f+42:0}).fadeIn("fast");}).mouseleave(function(){clearTimeout(X),W=!1,X=setTimeout(function(){W||U.fadeOut("fast");},500);}).appendTo(Z),U=b("<span>").appendTo(V),b.each(a.args.moreShow,function(){a.addBtn(this,12,5,U,!0,1);}),a.addBtn(-1,12,5,U,"\u66f4\u591a...",1).click(function(){U.fadeOut("fast"),a.showPanel();}))):3==J?(T="NIE-share-sideBar",S=!1,R=!1,Q=500,P=b("<div>",{id:T,html:"<div><b></b><span><button></button><h3>\u5206\u4eab\u5230...</h3><p></p></span></div>",mouseleave:function(){S&&(clearTimeout(X),R=!1,X=setTimeout(function(){R||(P.animate({width:30},Q),M.animate({right:-120},Q,function(){S=!1;}));},2*Q));},mouseenter:function(){S&&(clearTimeout(X),R=!0);}}).appendTo(b(document.body)),O=P.find("p"),M=P.find("div"),K=function(){P.css("top",b(window).scrollTop()+a.args.sideBar_top);},b.each(a.args.moreShow,function(){a.addBtn(this,12,5,O,!0,1);}),a.addBtn(-1,12,5,O,"\u66f4\u591a...").click(function(){a.showPanel();}),P.find("b").hover(function(){S||(S=!0,P.animate({width:150},Q),M.animate({right:0},Q));}),P.find("button").click(function(){M.animate({right:-150},Q,function(){P.remove();});}).hover(function(){b(this).addClass("hover");},function(){b(this).removeClass("hover");}),b.browser.msie&&b.browser.msie<=6?(b(window).scroll(K),K()):P.css({position:"fixed",top:a.args.sideBar_top})):4==J&&a.args.imgs?(T="NIE-share-img",H=b("#"+T),G=H.length>0,F=500,E=b(a.args.imgs),D=!1,k=function(c){return a.args.imgSize[0]<c.outerWidth()&&a.args.imgSize[1]<c.outerHeight();},E.hover(function(){var i=b(this),x=i.outerHeight(),w=i.offset(),v=10,u=b(window),j=H.outerHeight();k(i)&&(clearTimeout(I),D=!0,a.args.img=n(i.attr("src")).href,H.find(".NIE-share-more>span").hide(),H.css({top:w.top+x>u.scrollTop()+u.height()?w.top+v:w.top+x-v-j,left:w.left+v}).show());},function(){var c=b(this);k(c)&&(D=!1,clearTimeout(I),I=setTimeout(function(){D||H.hide();},F));}),a.args.defShow=a.args.defShow2,G||(H=b("<div>",{id:T,mouseenter:function(){clearTimeout(I),D=!0;},mouseleave:function(){D=!1,clearTimeout(I),I=setTimeout(function(){D||H.hide();},F);}}).appendTo(b(document.body)),a.args.type=1,a.args.fat=H,arguments.callee())):5==J&&a.args.txt?(T="NIE-share-txt",H=b("#"+T),G=H.length>0,h=!1,N=b(a.args.txt),L=function(){var c="";return window.getSelection?c=window.getSelection():document.getSelection?c=document.getSelection():document.selection&&(c=document.selection.createRange().text),b.trim(c);},a.args.defShow=a.args.defShow2,G||(H=b("<div>",{id:T}).appendTo(b(document.body)),N.mouseup(function(c){setTimeout(function(){var d=b.trim(L());h&&""!=d?(a.args.content=a.args.title=d,H.css({top:c.pageY+15,left:c.pageX-50}).show()):H.hide();},100);}).mouseleave(function(){h=!1;}).mouseenter(function(){h=!0;}),b(document.body).mouseup(function(){h||""!=b.trim(L())||H.hide();}),a.args.type=1,a.args.fat=H,arguments.callee())):6==J&&b.each(a.args.defShow,function(){a.addBtn(this,16,0,a.args.fat,!0,1);});}};return a.init=function(){var c,x,w,v,u,k,d;if(""==location.search||nie.util.share_traceCome||(c=location.search.match(a.args.urlReg),c&&(nie.util.share_traceCome=!0,r("http://click.ku.163.com/share.income.gif?"+["id="+c[2],"product="+c[3],"type="+c[4],"_r="+new Date().getMilliseconds()].join("&")))),x=[[23,"\u6613\u4fe1\u4e8c\u7ef4\u7801","YiXinQrCode","res.nie.netease.com/comm/js/nie/util/share/api/",{1:"url",2:"title"}],[22,"\u6613\u4fe1","YiXin","news.163.com/special/yixin-share/",{1:"url",2:"title",3:"image",4:"desc"},{source:encodeURIComponent("\u7f51\u6613\u6e38\u620f")}],[1,"QQ\u7a7a\u95f4","QQKongJian","sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey",{1:"url",2:"title",3:"pics",4:"desc"}],[2,"\u65b0\u6d6a\u5fae\u535a","XinLangWeiBo","v.t.sina.com.cn/share/share.php",{1:"url",2:"title",3:"pic"},{c:"nie",content:"gb2312",source:"nie"}],[3,"\u817e\u8baf\u5fae\u535a","TengXunWeiBo","v.t.qq.com/share/share.php",{1:"url",2:"title",3:"pic"}],[4,"\u817e\u8baf\u670b\u53cb","TengXunPengYou","sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey",{1:"url",2:"title",3:"pics",4:"desc"},{to:"pengyou"}],[5,"\u7f51\u6613\u5fae\u535a","WangYiWeiBo","t.163.com/article/user/checkLogin.do",{1:"link",2:"info",3:"images",5:"source"},{check1stImg:!0,togImg:!0,key:"OELT16LMxo0rAmtO"}],[6,"\u641c\u72d0\u5fae\u535a","SouHuWeiBo","t.sohu.com/third/post.jsp",{1:"url",2:"title",3:"pic"},{content:"utf-8"}],[7,"\u5f00\u5fc3\u7f51","KaiXinWang","www.kaixin001.com/repaste/share.php",{1:"rurl",2:"rtitle",4:"rcontent"}],[8,"\u4eba\u4eba\u7f51","RenRenWang","share.renren.com/share/buttonshare.do",{1:"link",2:"title"}],[9,"\u641c\u72d0\u767d\u793e\u4f1a","SouHuBaiSheHui","bai.sohu.com/share/blank/add.do",{1:"link",2:"title"}],[10,"\u6dd8\u6c5f\u6e56","TaoJiangHu","share.jianghu.taobao.com/share/addShare.htm",{1:"url",2:"title",4:"content"}],[11,"\u8c46\u74e3","DouBan","www.douban.com/recommend/",{1:"url",2:"title",3:"image"}],[13,"\u767e\u5ea6Hi","BaiDuHi","apps.hi.baidu.com/share/",{1:"url",2:"title",4:"content"}],[14,"\u767e\u5ea6\u8d34\u5427","BaiDuTieBa","tieba.baidu.com/i/app/open_share_api",{1:"link"}],[15,"\u767e\u5ea6\u641c\u85cf","BaiDuShouChang","cang.baidu.com/do/add",{1:"iu",2:"it",4:"dc"},{fr:"ien"}],[16,"\u996d\u5426","FangFou","fanfou.com/sharer",{1:"u",2:"t",4:"d"}],[17,"MSN","Msn","profile.live.com/badge",{1:"url",2:"title",3:"screenshot",4:"description"},{wa:"wsignin1.0"}],[18,"\u5929\u6daf\u793e\u533a","TianYaSheQu","share.tianya.cn/openapp/restpage/activity/appendDiv.jsp",{1:"ccUrl",2:"ccTitle",4:"ccBody"}],[19,"\u51e4\u51f0\u7f51\u5fae\u535a","FengHuangWangWeiBo","t.ifeng.com/interface.php",{1:"sourceUrl",2:"title",3:"pic"},{_c:"share",_a:"share"}],[20,"139\u8bf4\u5ba2","139ShuoKe","shequ.10086.cn/share/share.php",{1:"tourl",2:"title"}],[21,"\u68a6\u5e7b\u4eba\u751f","MengHuanRenSheng","dream.163.com/share/link/",{1:"url",2:"title",4:"content"}]],nie.util.share_css||(b.include("http://res.nie.netease.com/comm/js/nie/util/share/share.v3.css"),nie.util.share_css=!0),w=arguments,w.length>0&&w[0].length>0){v=w[0][0];for(u in v){"undefined"!=typeof v[u]&&(a.args[u]=v[u]);}}
    for(u=0,k=x.length;k>u;u++){d=x[u],a.data[d[0]]={name:d[1],searchTxt:d[2],file:d[3],paramName:d[4],params:s(d[5],{})};}
    a.render();}(arguments),a;};}(jQuery);
