nie.util.share_traceCome=nie.util.share_traceCome||false;nie.util.share_css=nie.util.share_css||false;(function(b){nie.util.share=nie.util.share||function(){var n="javascript:;",m=function(d,c){return typeof d!="undefined"?d:c},o=function(c){b(new Image()).bind("readystatechange",function(){if(this.readyState=="complete"){return}}).bind("abort",function(){return}).attr("src",c)},p=function(g,e,f,c){var d=t.args[g]!=null?t.args[g]:f;if(d==""){return d}else{if(g=="url"){d=q(d,e)}return encodeURIComponent(d+(typeof c!="undefined"?c:""))}},l=function(e){var d=[];for(var c in e){d.push(c+"="+e[c])}return d},r=function(c){var d=["product="+t.args.product,"id="+c,"type="+t.args.traceType];o("http://click.ku.163.com/share.v2.gif?"+d.join("&"))},s=function(d){var c=document.createElement("div");c.innerHTML='<a href="'+d.replace(/"/g,"%22")+'"/>';return c.firstChild},q=function(i,e){var c=i.match(t.args.urlReg);if(c){return i.replace(c[0],c[1]+[e,t.args.product,t.args.traceType].join(","))}else{var d=s(i),g=d.search+(d.search==""?"?":"&")+"nieShare="+[e,t.args.product,t.args.traceType].join(","),f=/^\//.test(d.pathname)?d.pathname:"/"+d.pathname,h=d.port==80?d.hostname:d.host;return d.protocol+"//"+h+f+g+d.hash}},a=function(h){if(t.data[h]){var d=t.data[h],x=p("url",h,location.href),w=p("title",h,document.title),k=p("img",h,""),c=p("content",h,document.title),j=function(){var u=[650,500];h==22?u=[460,380]:"";h==23?u=[573,600]:"";return u}(),g=l({width:j[0],height:j[1],top:(screen.height-j[1])/4,left:(screen.width-j[0])/2,toolbar:"no",menubar:"no",scrollbars:"no",resizable:"yes",location:"no",status:"no"});for(var e in d.paramName){var f="";switch(parseInt(e)){case 1:f=x;break;case 2:f=h==5?w+x:w;break;case 3:f=k;break;case 4:f=c;break;case 5:f=encodeURIComponent(nie.util.siteName());break}d.params[d.paramName[e]]=f}var i="http://"+d.file+"?"+l(d.params).join("&");window.open(i,"_blank",g.join(","));r(h)}},t={data:{},args:{panelID:"NIE-share-panel",fat:"#NIE-share",product:nie.config.site,imgs:null,txt:null,type:1,traceType:null,imgSize:[100,100],defShow:[23,22,1,2,3],defShow2:[23,22,1,2,3,8,4],moreShow:[23,22,5,1,2,3,4,6,7,8,9,10,11,13],searchTips:"\u8f93\u5165\u7f51\u7ad9\u540d\u6216\u62fc\u97f3\u7f29\u5199",sideBar_top:100,title:null,url:null,img:null,content:null,urlReg:new RegExp("([&?]nieShare=)(\\d+),([^,]+),(\\d+)")},addBtn:function(i,H,c,k,h,E){var j="",I="",i=parseInt(i),f="\u5206\u4eab\u5230",e="",F="",C=0,D=16;switch(m(E,t.args.type)){case 1:C=-(H-16+(i+1)*6+(i+1)*16);break;case 2:C=-i*32;i==22?C=-160:"";i==23?C=-192:"";D=32;break;case 3:C=-(H-16+(i+1)*6+(i+1)*16);break}var d="background-position:"+c+"px "+C+"px";if(h==true){j=t.data[i].name;I=f+j;F=d}else{if(h==false){I=f+t.data[i].name;e="<img width="+D+" height="+D+" src='http://res.nie.netease.com/comm/blank.gif' style='"+d+"'>"}else{j=h;F=d}}var G={index:i,"class":t.args.type==6?"NIE-share":"",style:F,href:n,title:I,target:"_self"};if(e==""){G.text=j}else{G.html=e}var g=b("<a>",G).appendTo(k);(function(){var u=i;g.click(function(){a(u)}).addClass("NIE-share-btn"+u)})();return g},addPanel:function(){var c=b("<div>",{id:t.args.panelID,html:"<h3>\u5206\u4eab\u5230...</h3><input type=text value='"+t.args.searchTips+"'/><div></div>"}).hide().appendTo(b(document.body));b("<button>").click(function(){c.hide()}).hover(function(){b(this).addClass("hover")},function(){b(this).removeClass("hover")}).appendTo(c);var d=c.find("div");for(var e in t.data){t.addBtn(e,12,5,d,true,1)}c.find("input").click(function(){var g=b(this),f=g.val();if(f==t.args.searchTips){g.val("")}}).keyup(function(){var f=b(this).val().toLowerCase();d.find("a").each(function(){var h=b(this),g=h.attr("index");if(t.data[g].name.toLowerCase().indexOf(f)!=-1||t.data[g].searchTxt.toLowerCase().indexOf(f)!=-1||t.data[g].searchTxt.replace(/[a-z]/g,"").toLowerCase().indexOf(f)!=-1){h.show()}else{h.hide()}})})},showPanel:function(){var e="#"+t.args.panelID,f=b(e),c=b(window);if(f.length==0){t.addPanel()}f=b(e);var d=c.scrollTop()+(c.height()-f.height())/2;f.css({top:d<0?0:d,left:(c.width()-f.width())/2}).show().find("a").show()},render:function(){var R=t.args.type;if(t.args.traceType==null){t.args.traceType=R}if(R==1||R==2){var c=b(t.args.fat);if(c.length>0){var k=b("<span>",{"class":"NIE-share NIE-share"+R,html:"<span class='NIE-share-txt'>\u5206\u4eab\u5230:</span>"}).appendTo(c),aa=b("<span>",{"class":"NIE-share-iconBtn"}).appendTo(k);if(b.browser.webkit){aa.css("fontSize",R==2?"41px":"20px")}b.each(t.args.defShow,function(u){t.addBtn(this,16,0,aa,false)});var W=true,ab,i=b("<span>",{html:"<em>\u66f4\u591a</em>","class":"NIE-share-more"}).mouseenter(function(){clearTimeout(ab);W=true;var w=b(window),y=b(this).children("span"),x=y.outerHeight(),v=y.outerWidth(),u=k.offset();y.css({top:w.scrollTop()+w.height()<u.top+x+20?-x-12:4,left:w.scrollLeft()+w.width()<u.left+k.width()+v?-v+42:0}).fadeIn("fast")}).mouseleave(function(){clearTimeout(ab);W=false;ab=setTimeout(function(){if(!W){X.fadeOut("fast")}},500)}).appendTo(k),X=b("<span>").appendTo(i);b.each(t.args.moreShow,function(){t.addBtn(this,12,5,X,true,1)});t.addBtn(-1,12,5,X,"\u66f4\u591a...",1).click(function(){X.fadeOut("fast");t.showPanel()})}}else{if(R==3){var T="NIE-share-sideBar",Y=false,N=false,d=500,ab,h=b("<div>",{id:T,html:"<div><b></b><span><button></button><h3>\u5206\u4eab\u5230...</h3><p></p></span></div>",mouseleave:function(){if(Y){clearTimeout(ab);N=false;ab=setTimeout(function(){if(!N){h.animate({width:30},d);P.animate({right:-120},d,function(){Y=false})}},d*2)}},mouseenter:function(){if(Y){clearTimeout(ab);N=true}}}).appendTo(b(document.body)),j=h.find("p"),P=h.find("div"),e=function(){h.css("top",b(window).scrollTop()+t.args.sideBar_top)};b.each(t.args.moreShow,function(){t.addBtn(this,12,5,j,true,1)});t.addBtn(-1,12,5,j,"\u66f4\u591a...").click(function(){t.showPanel()});h.find("b").hover(function(){if(!Y){Y=true;h.animate({width:150},d);P.animate({right:0},d)}});h.find("button").click(function(){P.animate({right:-150},d,function(){h.remove()})}).hover(function(){b(this).addClass("hover")},function(){b(this).removeClass("hover")});if(b.browser.msie&&b.browser.msie<=6){b(window).scroll(e);e()}else{h.css({position:"fixed",top:t.args.sideBar_top})}}else{if(R==4&&t.args.imgs){var T="NIE-share-img",Q=b("#"+T),Z=Q.length>0,V,g=500,M=b(t.args.imgs),f=false,S=function(u){return t.args.imgSize[0]<u.outerWidth()&&t.args.imgSize[1]<u.outerHeight()};M.hover(function(){var x=b(this),z=x.outerHeight(),u=x.offset(),y=10,v=b(window),w=Q.outerHeight();if(S(x)){clearTimeout(V);f=true;t.args.img=s(x.attr("src")).href;Q.find(".NIE-share-more>span").hide();Q.css({top:u.top+z>v.scrollTop()+v.height()?u.top+y:u.top+z-y-w,left:u.left+y}).show()}},function(){var u=b(this);if(S(u)){f=false;clearTimeout(V);V=setTimeout(function(){if(!f){Q.hide()}},g)}});t.args.defShow=t.args.defShow2;if(!Z){Q=b("<div>",{id:T,mouseenter:function(){clearTimeout(V);f=true},mouseleave:function(){f=false;clearTimeout(V);V=setTimeout(function(){if(!f){Q.hide()}},g)}}).appendTo(b(document.body));t.args.type=1;t.args.fat=Q;arguments.callee()}}else{if(R==5&&t.args.txt){var T="NIE-share-txt",Q=b("#"+T),Z=Q.length>0,U=false,O=b(t.args.txt),ac=function(){var u="";if(window.getSelection){u=window.getSelection()}else{if(document.getSelection){u=document.getSelection()}else{if(document.selection){u=document.selection.createRange().text}}}return b.trim(u)};t.args.defShow=t.args.defShow2;if(!Z){Q=b("<div>",{id:T}).appendTo(b(document.body));O.mouseup(function(u){setTimeout(function(){var v=b.trim(ac());if(U&&v!=""){t.args.content=t.args.title=v;Q.css({top:u.pageY+15,left:u.pageX-50}).show()}else{Q.hide()}},100)}).mouseleave(function(){U=false}).mouseenter(function(){U=true});b(document.body).mouseup(function(){if(!U&&b.trim(ac())==""){Q.hide()}});t.args.type=1;t.args.fat=Q;arguments.callee()}}else{if(R==6){b.each(t.args.defShow,function(){t.addBtn(this,16,0,t.args.fat,true,1)})}}}}}}};t.init=function(){if(location.search!=""&&!nie.util.share_traceCome){var h=location.search.match(t.args.urlReg);if(h){nie.util.share_traceCome=true;o("http://click.ku.163.com/share.income.gif?"+["id="+h[2],"product="+h[3],"type="+h[4],"_r="+new Date().getMilliseconds()].join("&"))}}var d=[[23,"\u6613\u4fe1\u4e8c\u7ef4\u7801","YiXinQrCode","res.nie.netease.com/comm/js/nie/util/share/api/",{1:"url",2:"title"}],[22,"\u6613\u4fe1","YiXin","news.163.com/special/yixin-share/",{1:"url",2:"title",3:"image",4:"desc"},{source:encodeURIComponent("\u7f51\u6613\u6e38\u620f")}],[1,"QQ\u7a7a\u95f4","QQKongJian","sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey",{1:"url",2:"title",3:"pics",4:"desc"}],[2,"\u65b0\u6d6a\u5fae\u535a","XinLangWeiBo","v.t.sina.com.cn/share/share.php",{1:"url",2:"title",3:"pic"},{c:"nie",content:"gb2312",source:"nie"}],[3,"\u817e\u8baf\u5fae\u535a","TengXunWeiBo","v.t.qq.com/share/share.php",{1:"url",2:"title",3:"pic"}],[4,"\u817e\u8baf\u670b\u53cb","TengXunPengYou","sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey",{1:"url",2:"title",3:"pics",4:"desc"},{to:"pengyou"}],[5,"\u7f51\u6613\u5fae\u535a","WangYiWeiBo","t.163.com/article/user/checkLogin.do",{1:"link",2:"info",3:"images",5:"source"},{check1stImg:true,togImg:true,key:"OELT16LMxo0rAmtO"}],[6,"\u641c\u72d0\u5fae\u535a","SouHuWeiBo","t.sohu.com/third/post.jsp",{1:"url",2:"title",3:"pic"},{content:"utf-8"}],[7,"\u5f00\u5fc3\u7f51","KaiXinWang","www.kaixin001.com/repaste/share.php",{1:"rurl",2:"rtitle",4:"rcontent"}],[8,"\u4eba\u4eba\u7f51","RenRenWang","share.renren.com/share/buttonshare.do",{1:"link",2:"title"}],[9,"\u641c\u72d0\u767d\u793e\u4f1a","SouHuBaiSheHui","bai.sohu.com/share/blank/add.do",{1:"link",2:"title"}],[10,"\u6dd8\u6c5f\u6e56","TaoJiangHu","share.jianghu.taobao.com/share/addShare.htm",{1:"url",2:"title",4:"content"}],[11,"\u8c46\u74e3","DouBan","www.douban.com/recommend/",{1:"url",2:"title",3:"image"}],[13,"\u767e\u5ea6Hi","BaiDuHi","apps.hi.baidu.com/share/",{1:"url",2:"title",4:"content"}],[14,"\u767e\u5ea6\u8d34\u5427","BaiDuTieBa","tieba.baidu.com/i/app/open_share_api",{1:"link"}],[15,"\u767e\u5ea6\u641c\u85cf","BaiDuShouChang","cang.baidu.com/do/add",{1:"iu",2:"it",4:"dc"},{fr:"ien"}],[16,"\u996d\u5426","FangFou","fanfou.com/sharer",{1:"u",2:"t",4:"d"}],[17,"MSN","Msn","profile.live.com/badge",{1:"url",2:"title",3:"screenshot",4:"description"},{wa:"wsignin1.0"}],[18,"\u5929\u6daf\u793e\u533a","TianYaSheQu","share.tianya.cn/openapp/restpage/activity/appendDiv.jsp",{1:"ccUrl",2:"ccTitle",4:"ccBody"}],[19,"\u51e4\u51f0\u7f51\u5fae\u535a","FengHuangWangWeiBo","t.ifeng.com/interface.php",{1:"sourceUrl",2:"title",3:"pic"},{_c:"share",_a:"share"}],[20,"139\u8bf4\u5ba2","139ShuoKe","shequ.10086.cn/share/share.php",{1:"tourl",2:"title"}],[21,"\u68a6\u5e7b\u4eba\u751f","MengHuanRenSheng","dream.163.com/share/link/",{1:"url",2:"title",4:"content"}]];if(!nie.util.share_css){b.include("http://res.nie.netease.com/comm/js/nie/util/share/share.v3.css");nie.util.share_css=true}var i=arguments;if(i.length>0&&i[0].length>0){var f=i[0][0];for(var g in f){if(typeof f[g]!="undefined"){t.args[g]=f[g]}}}for(var g=0,c=d.length;g<c;g++){var e=d[g];t.data[e[0]]={name:e[1],searchTxt:e[2],file:e[3],paramName:e[4],params:m(e[5],{})}}t.render()}(arguments);return t}})(jQuery);
